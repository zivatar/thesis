{% extends 'climate/base.html' %}
{% load staticfiles %}
{% load widget_tweaks %}
{% block content %}
<script>

	var lat;
	var lon;
	function setLatLon(lat, lon) {
		document.getElementById("new_site_lat").value = lat;
		document.getElementById("new_site_lon").value = lon;
	};
</script>

<div class="panel panel-primary">
	<div class="panel-heading">
		<span class="glyphicon glyphicon-map-marker"></span> {{ site.title }}
	</div>
	<div class="panel-body">
			
		<div class="tab-content">
				
			<div id="add_new" class="tab-pane fade in active">
				<h1>{{ site.title }}</h1>
						
				<div id="google_maps_one_marker" class="col-12">
				</div>
				
				<h2>Legutóbbi észlelések</h2>
				<div class="col-12">
				<table class="table table-striped table-condensed observation">
					<thead>
						<tr>
							<th>Dátum</th>
							<th>Szélsebesség (Beaufort-skála)</th>
							<th>Időjárási jelenségek</th>
						</tr>
					</thead>
					<tbody>
					{% for o in observations %}
						<tr>
						<td>{{ o.createdDate|date:'Y-m-d H:i' }}
						<td>{{ o.windSpeed }}</td>
						<td>
								{% for wc in o.weatherCode %}
									{% if wc %}<span class="label label-primary">{{ wc }}</span>{% endif %}
								{% endfor %}
						</td>
						<tr>
					{% endfor %}
						<tr>
							<td colspan=3><a href="{% url 'observations' pk=site.pk %}">További észlelések</a></td>
						</tr>
					</tbody>
				</table>
				</div>
				
				<h2><a href="{% url 'actual_month' pk=site.pk %}">Éghajlati napló</a></h2>
				<h2><a href="{% url 'upload' pk=site.pk %}">Adatok feltöltése</a></h2>

				<h2>Éghajlati adatok</h2>

				<table class="table table-striped">
				{% for y in ym %}
					<tr>
						<td colspan="12"><a href="{% url 'yearly_view' pk=site.pk year=y.year.year %}">{{ y.year.year }}</a></td>
					</tr>
					<tr>
					{% for m in y.months %}
						<td>{{ m.month }}</td>
					{% endfor %}
					</tr>
				{% endfor %}
				</table>
				
			</div>
					
		</div>

	</div>
</div>

{% endblock content %}